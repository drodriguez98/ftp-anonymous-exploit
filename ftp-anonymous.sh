#!/bin/bash

# Setting up colors for better readability

greenColour="\e[0;32m\033[1m"
endColour="\033[0m\e[0m"
redColour="\e[0;31m\033[1m"
blueColour="\e[0;34m\033[1m"
yellowColour="\e[0;33m\033[1m"
purpleColour="\e[0;35m\033[1m"
turquoiseColour="\e[0;36m\033[1m"
grayColour="\e[0;37m\033[1m"

# Define variables

TARGET_IP="192.168.1.123"  # Change to the target's IP address
FTP_PORT=21  # Default FTP port
TIMEOUT=5  # Waiting time in seconds

# Function to try to log in as anonymous user

try_anonymous_login() {
    echo -e "${turquoiseColour}Trying to log in as an anonymous user to the FTP server...${endColour}"
    ftp -n $TARGET_IP $FTP_PORT <<END_SCRIPT
quote USER anonymous
quote PASS anonymous
quit
END_SCRIPT
}

# Function to upload a file to the FTP server

upload_file() {
    local file="$1"
    local folder="$2"
    echo -e "${turquoiseColour}Uploading file $file to FTP server...${endColour}"
    ftp -n $TARGET_IP $FTP_PORT <<END_SCRIPT
quote USER anonymous
quote PASS anonymous
cd "$folder"
put "$file"
quit
END_SCRIPT
}

# Function to list files on FTP server

list_files() {
    echo -e "${turquoiseColour}Listing files on the FTP server...${endColour}"
    ftp -n $TARGET_IP $FTP_PORT <<END_SCRIPT
quote USER anonymous
quote PASS anonymous
ls -R
quit
END_SCRIPT
}

# Function to download all content from FTP server

download_all() {
    echo -e "${turquoiseColour}Downloading all content from the FTP server...${endColour}"
    wget -m ftp://anonymous@${TARGET_IP}:${FTP_PORT}/
}

# Options menu

while true; do
    echo -e "${blueColour}Select an action: ${endColour}"
    echo -e "${yellowColour}1. Try to log in as an anonymous user${endColour}"
    echo -e "${yellowColour}2. List all files${endColour}"
    echo -e "${yellowColour}3. Download all content from the FTP server${endColour}"
    echo -e "${yellowColour}4. Upload file${endColour}"
    echo -e "${yellowColour}5. Exit${endColour}"

    read -p "Option: " option

    case $option in
        1)
            try_anonymous_login
            ;;

        2)
            list_files
            ;;

        3)
            download_all
            ;;

        4)
            read -p "Name of the file to upload: " filename
            read -p "Destination folder (full path): " destination_folder
            upload_file "$filename" "$destination_folder"
            ;;

        5)
            echo -e "${redColour}Closing...${endColour}"
            exit 0
            ;;
        *)
            echo -e "${redColour}Invalid option. Please select a valid option.${endColour}"
            ;;
    esac
done